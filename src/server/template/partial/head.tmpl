{{define "head"}}
<!DOCTYPE html>
<html lang="{{if .server.Lang}}{{.server.Lang}}{{else}}en{{end}}" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.title}} - {{.server.Title}}</title>
    <meta name="description" content="{{.server.Description}}">
    {{if .server.Keywords}}<meta name="keywords" content="{{.server.Keywords}}">{{end}}
    {{if .server.Author}}<meta name="author" content="{{.server.Author}}">{{end}}

    <!-- OpenGraph meta tags per AI.md PART 16 -->
    <meta property="og:title" content="{{.title}} - {{.server.Title}}">
    <meta property="og:description" content="{{.server.Description}}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{.current_url}}">
    {{if .server.OGImage}}<meta property="og:image" content="{{.server.OGImage}}">{{end}}

    <!-- Twitter Card meta tags per AI.md PART 16 -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{.title}} - {{.server.Title}}">
    <meta name="twitter:description" content="{{.server.Description}}">
    {{if .server.OGImage}}<meta name="twitter:image" content="{{.server.OGImage}}">{{end}}
    {{if .server.TwitterHandle}}<meta name="twitter:site" content="{{.server.TwitterHandle}}">{{end}}

    <!-- Site verification meta tags per AI.md PART 16 (only if configured) -->
    {{if .server.VerifyGoogle}}<meta name="google-site-verification" content="{{.server.VerifyGoogle}}">{{end}}
    {{if .server.VerifyBing}}<meta name="msvalidate.01" content="{{.server.VerifyBing}}">{{end}}
    {{if .server.VerifyYandex}}<meta name="yandex-verification" content="{{.server.VerifyYandex}}">{{end}}
    {{if .server.VerifyBaidu}}<meta name="baidu-site-verification" content="{{.server.VerifyBaidu}}">{{end}}
    {{if .server.VerifyPinterest}}<meta name="p:domain_verify" content="{{.server.VerifyPinterest}}">{{end}}
    {{if .server.VerifyFacebook}}<meta property="fb:domain_verification" content="{{.server.VerifyFacebook}}">{{end}}

    <!-- AI.md PART 16: Theme initialization - MUST be in head to prevent flash -->
    <script>
    (function() {
        var theme = localStorage.getItem('theme');
        if (!theme) {
            // Default to dark per AI.md PART 16
            theme = 'dark';
            localStorage.setItem('theme', theme);
        }
        // Apply auto theme (respect system preference)
        if (theme === 'auto') {
            theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }
        document.documentElement.setAttribute('data-theme', theme);
    })();
    </script>

    <!-- Accessibility: Skip to main content link (TEMPLATE.md PART 29) -->
    <a href="#main-content" class="skip-link">{{t .server.Lang "aria_skip_to_main"}}</a>

    <link rel="stylesheet" href="/static/css/dracula.css">
    <link rel="stylesheet" href="/static/css/template-overrides.css">
    <link rel="stylesheet" href="/static/css/accessibility.css">
    <link rel="stylesheet" href="/static/css/notifications.css">
    <!-- AI.md PART 16: All JavaScript in ONE file -->
    <script src="/static/js/app.js" defer></script>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#282a36">
</head>
<body>
{{end}}
