# Valkey configuration optimized for AIO containers
# Low memory, unix socket, persistent

# Network (unix socket only - no TCP, faster + more secure)
port 0
unixsocket /run/valkey/valkey.sock
unixsocketperm 770

# Memory (conservative for AIO)
maxmemory 64mb
maxmemory-policy allkeys-lru

# Persistence (AOF for durability)
dir /data/db/valkey
appendonly yes
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 32mb

# Disable RDB (AOF is sufficient for AIO)
save ""

# Performance
tcp-keepalive 300
timeout 0

# Logging
loglevel notice
logfile ""

# Security (no password needed - socket only, container internal)
protected-mode no
